---
# Spotify repo
- name: "Add Spotify repository key"
  apt_key:
    url: "https://download.spotify.com/debian/pubkey_6224F9941A8AA6D1.gpg"
    state: present
  become: true

- name: "Add Spotify repository"
  apt_repository:
    repo: "deb http://repository.spotify.com stable non-free"
    state: present
  become: true

# Hashicorp
- name: "Add Hashicorp repository key"
  apt_key:
    url: "https://apt.releases.hashicorp.com/gpg"
    state: present
  become: true

- name: "Add Hashicorp repository"
  apt_repository:
    repo: "deb https://apt.releases.hashicorp.com {{ stable_debian_codename }} main"
    state: present
  become: true

- name: "Upgrade all packages to the latest version"
  become: true
  apt:
    name: "*"
    state: latest
    update_cache: yes
  tags: upgrade

- name: "Install tools and stuff"
  become: true
  apt:
    name: "{{ packages }}"
    state: latest
    autoclean: yes
    force: yes
  tags: upgrade

- name: Install asdf suff
  include_tasks: asdf.yml
  tags:
    - upgrade
    - asdf

- name: Install NeoVim
  include_tasks: neovim.yml
  tags: neovim

- name: Install Wezterm
  include_tasks: wezterm.yml
  tags: wezterm

- name: Install DBeaver
  include_tasks: dbeaver.yml
  tags: dbeaver

- name: Install Slack
  include_tasks: slack.yml
  tags: slack

- name: Install VSCode
  include_tasks: vscode.yml
  tags: vscode
